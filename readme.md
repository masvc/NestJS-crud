# 認証システム設計概要

## 技術スタック

- **バックエンド**: NestJS (TypeScript)
- **フロントエンド**: React + Vite (TypeScript)
- **モノレポ構成**: 1 つのリポジトリでバックエンド・フロントエンドを管理

## 認証方式

- **JWT 認証**（まずはこれを実装）
  - アクセストークン/リフレッシュトークン方式
- **OAuth 認証**
  - Google ログイン
  - Microsoft ログイン
- **将来的な拡張**
  - マジックリンク認証（メールリンクによるログイン）も検討

## ユーザー登録

- メールアドレス＋パスワードによる新規登録機能
- Google/Microsoft アカウントによる新規登録・ログイン

## ユーザー権限

- 無料ユーザー
- 有料ユーザー
- 管理者

## ディレクトリ構成（例）

```
/ (ルート)
├── apps/
│   ├── backend/   # NestJS バックエンド
│   └── frontend/  # React+Vite フロントエンド
├── packages/      # 共通ライブラリや型定義など（必要に応じて）
└── readme.md
```

## バックエンド（NestJS）

- 認証 API（JWT 発行、OAuth 連携、ユーザー登録/管理）
- ユーザー情報・権限管理
- 有料ユーザー判定用のサブスクリプション管理（将来的に Stripe 等と連携も想定）

## フロントエンド（React+Vite）

- ログイン/新規登録画面
- Google/Microsoft ログインボタン
- ユーザー状態に応じた画面表示（無料/有料/管理者）

## 今後の拡張性

- マジックリンク認証の追加
- サブスクリプション決済連携
- 権限ごとの画面・機能制御

---

### 補足・質問事項

- サブスクリプション決済（有料ユーザー判定）はどのサービスを想定？（Stripe 等）
- 管理者画面の要件や範囲は？
- その他、API の多言語対応や監査ログなど必要な機能があれば教えてください。
